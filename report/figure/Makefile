
# This Makefile is generated by script/figure/configure.py
# Do not modify this file manually, modify the config file instead

.DEFAULT_GOAL:=all_tikz_pdf

make_flag:=--no-print-directory -j8

RSCRIPT:=Rscript --no-save --no-restore

plot/reference/fig15-fp-exptmod-all.png: ../data/reference/fig15/summary.csv \
                                         src/fig15-side-channel-shared-lib.R
	@echo -e "GEN \t $@"
	@${RSCRIPT} $(word 2,$^) --data $< --out $@ --type png -a 0


plot/reference/fig15-fp-exptmod.png: ../data/reference/fig15/summary.csv \
                                     src/fig15-side-channel-shared-lib.R
	@echo -e "GEN \t $@"
	@${RSCRIPT} $(word 2,$^) --data $< --out $@ --type png -a 3


./Rplots.svg: ./Rplots.pdf
	@echo -e "GEN \t $@"
	@bash ../script/figure/pdf_to_svg/pdf_to_svg.sh $<


.PHONY: all
all: all_tikz     \
     all_pdf      \
     all_png      \
     all_tikz_pdf \
     all_tikz_svg \
     all_pdf_svg

.PHONY: all_pdf
all_pdf: 

.PHONY:  all_png
all_png: plot/reference/fig15-fp-exptmod-all.png \
         plot/reference/fig15-fp-exptmod.png

.PHONY: all_tikz
all_tikz: 

.PHONY: all_tikz_pdf
all_tikz_pdf: 

.PHONY: all_tikz_svg
all_tikz_svg: 

.PHONY:      all_pdf_svg
all_pdf_svg: ./Rplots.svg

config: 
	ln -s ../config $@


figure: 
	ln -s . $@


.PHONY:      tikz_to_pdf
tikz_to_pdf: out/plots.pdf

out/plots.pdf: plots.tex \
               config    \
               figure
	@latexmk -pdf -outdir=out -quiet plots.tex


.PHONY:clean
clean: clean_tikz     \
       clean_tikz_pdf \
       clean_tikz_svg \
       clean_pdf      \
       clean_png      \
       clean_symlinks

.PHONY: clean_tikz
clean_tikz: 
	rm -f 
	rm -f *_ras1.png


.PHONY: clean_tikz_pdf
clean_tikz_pdf: 
	rm -f 


.PHONY: clean_tikz_svg
clean_tikz_svg: 
	rm -f 


.PHONY: clean_pdf
clean_pdf: 
	rm -f 

.PHONY: clean_png
clean_png: 
	rm -f plot/reference/fig15-fp-exptmod-all.png plot/reference/fig15-fp-exptmod.png

.PHONY: clean_symlinks
clean_symlinks: 
	rm -f config figure
